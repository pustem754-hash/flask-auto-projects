<!DOCTYPE html>
<html lang="ru">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Flask Timer</title>
 <style>
 body {
 font-family: Arial, sans-serif;
 max-width: 600px;
 margin: 50px auto;
 padding: 20px;
 background-color: #f0f0f0;
 }
 .container {
 background: white;
 padding: 30px;
 border-radius: 10px;
 box-shadow: 0 2px 10px rgba(0,0,0,0.1);
 text-align: center;
 }
 .timer-display {
 font-size: 3em;
 font-weight: bold;
 color: #333;
 margin: 20px 0;
 padding: 20px;
 background: #f8f8f8;
 border-radius: 5px;
 }
 .timer-display.active {
 color: #e74c3c;
 }
 .timer-display.finished {
 color: #27ae60;
 }
 .input-group {
 margin: 20px 0;
 }
 input {
 padding: 10px;
 font-size: 16px;
 border: 1px solid #ddd;
 border-radius: 5px;
 margin: 0 5px;
 width: 80px;
 text-align: center;
 }
 button {
 padding: 12px 25px;
 font-size: 16px;
 border: none;
 border-radius: 5px;
 margin: 10px 5px;
 cursor: pointer;
 transition: background-color 0.3s;
 }
 .btn-start {
 background-color: #27ae60;
 color: white;
 }
 .btn-start:hover {
 background-color: #229954;
 }
 .btn-stop {
 background-color: #e74c3c;
 color: white;
 }
 .btn-stop:hover {
 background-color: #c0392b;
 }
 .message {
 margin: 20px 0;
 padding: 10px;
 border-radius: 5px;
 }
 .success {
 background-color: #d4edda;
 color: #155724;
 border: 1px solid #c3e6cb;
 }
 .error {
 background-color: #f8d7da;
 color: #721c24;
 border: 1px solid #f5c6cb;
 }
 </style>
</head>
<body>
 <div class="container">
 <h1>üïí Flask Timer</h1>
 
 <div class="timer-display" id="timerDisplay">
 00:00
 </div>
 
 <div class="input-group">
 <label>–ú–∏–Ω—É—Ç—ã:</label>
 <input type="number" id="minutes" min="0" max="59" value="5">
 <label>–°–µ–∫—É–Ω–¥—ã:</label>
 <input type="number" id="seconds" min="0" max="59" value="0">
 </div>
 
 <div>
 <button class="btn-start" onclick="startTimer()">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
 <button class="btn-stop" onclick="stopTimer()">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
 </div>
 
 <div id="message"></div>
 </div>

 <script>
 let updateInterval;
 
 function formatTime(seconds) {
 const mins = Math.floor(seconds / 60);
 const secs = seconds % 60;
 return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
 }
 
 function showMessage(text, isError = false) {
 const messageDiv = document.getElementById('message');
 messageDiv.innerHTML = `<div class="message ${isError ? 'error' : 'success'}">${text}</div>`;
 setTimeout(() => {
 messageDiv.innerHTML = '';
 }, 3000);
 }
 
 function updateTimerDisplay() {
 fetch('/get_status')
 .then(response => response.json())
 .then(data => {
 const display = document.getElementById('timerDisplay');
 display.textContent = formatTime(data.remaining);
 
 if (data.finished) {
 display.className = 'timer-display finished';
 showMessage('‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ!', false);
 clearInterval(updateInterval);
 } else if (data.active) {
 display.className = 'timer-display active';
 } else {
 display.className = 'timer-display';
 }
 });
 }
 
 function startTimer() {
 const minutes = document.getElementById('minutes').value;
 const seconds = document.getElementById('seconds').value;
 
 fetch('/start_timer', {
 method: 'POST',
 headers: {
 'Content-Type': 'application/json',
 },
 body: JSON.stringify({
 minutes: minutes,
 seconds: seconds
 })
 })
 .then(response => response.json())
 .then(data => {
 if (data.success) {
 showMessage(data.message, false);
 clearInterval(updateInterval);
 updateInterval = setInterval(updateTimerDisplay, 1000);
 } else {
 showMessage(data.message, true);
 }
 });
 }
 
 function stopTimer() {
 fetch('/stop_timer', {
 method: 'POST',
 headers: {
 'Content-Type': 'application/json',
 }
 })
 .then(response => response.json())
 .then(data => {
 showMessage(data.message, false);
 clearInterval(updateInterval);
 updateTimerDisplay();
 });
 }
 
 // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
 updateTimerDisplay();
 </script>
</body>
</html>