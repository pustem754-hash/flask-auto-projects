{% extends "base.html" %}

{% block title %}Главная - Заметки о книгах{% endblock %}

{% block content %}
<div class="row">
 <div class="col-md-12">
 <div class="d-flex justify-content-between align-items-center mb-4">
 <h1><i class="fas fa-book-open"></i> Мои книги</h1>
 <a href="{{ url_for('add_book') }}" class="btn btn-primary">
 <i class="fas fa-plus"></i> Добавить книгу
 </a>
 </div>

 {% if books %}
 <div class="row">
 {% for book in books %}
 <div class="col-md-6 col-lg-4 mb-4">
 <div class="card h-100">
 <div class="card-header d-flex justify-content-between align-items-center">
 <h6 class="mb-0">{{ book.genre.title() if book.genre else 'Жанр не указан' }}</h6>
 {% if book.rating %}
 <span class="badge bg-warning">
 {% for i in range(book.rating) %}
 <i class="fas fa-star"></i>
 {% endfor %}
 {{ book.rating }}/5
 </span>
 {% endif %}
 </div>
 <div class="card-body">
 <h5 class="card-title">{{ book.title }}</h5>
 <p class="card-text">
 <strong>Автор:</strong> {{ book.author }}<br>
 <small class="text-muted">
 Добавлено: {{ book.created_at.strftime('%d.%m.%Y') }}
 </small>
 </p>
 {% if book.notes %}
 <p class="card-text">
 {{ book.notes[:100] }}{% if book.notes|length > 100 %}...{% endif %}
 </p>
 {% endif %}
 </div>
 <div class="card-footer">
 <div class="btn-group w-100" role="group">
 <a href="{{ url_for('view_book', id=book.id) }}" class="btn btn-outline-primary">
 <i class="fas fa-eye"></i> Просмотр
 </a>
 <a href="{{ url_for('edit_book', id=book.id) }}" class="btn btn-outline-secondary">
 <i class="fas fa-edit"></i> Изменить
 </a>
 <a href="{{ url_for('delete_book', id=book.id) }}" 
 class="btn btn-outline-danger"
 onclick="return confirm('Вы уверены, что хотите удалить эту книгу?')">
 <i class="fas fa-trash"></i> Удалить
 </a>
 </div>
 </div>
 </div>
 </div>
 {% endfor %}
 </div>
 {% else %}
 <div class="text-center py-5">
 <i class="fas fa-book fa-3x text-muted mb-3"></i>
 <h3>Пока нет книг</h3>
 <p class="text-muted">Добавьте свою первую книгу, чтобы начать вести заметки</p>
 <a href="{{ url_for('add_book') }}" class="btn btn-primary">
 <i class="fas fa-plus"></i> Добавить первую книгу
 </a>
 </div>
 {% endif %}
 </div>
</div>
{% endblock %}